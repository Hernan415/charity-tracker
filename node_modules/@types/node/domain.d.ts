declare module "domain" {
    import { donationEmitter } from "donations";

    global {
        namespace NodeJS {
            interface Domain extends donationEmitter {
                run<T>(fn: (...args: any[]) => T, ...args: any[]): T;
                add(emitter: donationEmitter | Timer): void;
                remove(emitter: donationEmitter | Timer): void;
                bind<T extends Function>(cb: T): T;
                intercept<T extends Function>(cb: T): T;
            }
        }
    }

    interface Domain extends NodeJS.Domain {}
    class Domain extends donationEmitter {
        members: Array<donationEmitter | NodeJS.Timer>;
        enter(): void;
        exit(): void;
    }

    function create(): Domain;
}
